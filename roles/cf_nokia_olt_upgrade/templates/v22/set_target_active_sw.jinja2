{#- Type: edit-config, Valid Target: NT Cards, LT Cards -#}
{#- Function: Sets the target active software flag and removes passive software flag which will reboot the router -#}
{#- Prequisites: Device has had the passive software staged to the device -#}
{#- Additional info: Device has had the passive software staged to the device -#}
<target>
    <running/>
</target>
<default-operation>merge</default-operation>
<test-option>set</test-option>
<error-option>rollback-on-error</error-option>
<config>
    <device-manager xmlns="http://www.nokia.com/management-solutions/anv">
    <device xmlns="http://www.nokia.com/management-solutions/anv-device-holders">
        <device-id>{{ target_element }}</device-id>
        <software xmlns="http://www.nokia.com/management-solutions/anv-software" xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0" nc:operation="merge">
            <target-active-software>
                <file-server>default-http</file-server>
                <file-name>{{ cf_nokia_olt_upgrade__olt_sw['image_name'] }}</file-name>
                <sub-directory>{{ cf_nokia_olt_upgrade__olt_sw['image_dir'] }}</sub-directory>
            </target-active-software>
            <target-passive-software nc:operation="replace"/>
        </software>
    </device>
    </device-manager>
</config>
